<%
  ann = locals[:ann]
  next_ann = locals[:next_ann]
  is_active = locals[:is_active]
  parent_id = ann.previous&.id
  card_path = locals[:card_path]
%>

<div class="history-card<%= ' is-active' if is_active %>" data-history-target="cards" data-uuid="<%= ann.id %>" data-parent-uuid="<%= parent_id %>">
  <%= link_to card_path.call(ann.id), class: "history-card-link" do %>
    <div class="history-card-prompt"><%= truncate(ann.prompt.to_s, length: 30) %></div>
  <% end %>
</div>

<%# Check !next_ann.nil? to prevent the "â†‘" arrow from appearing below the bottom history entry, as parent_uuid would be nil in that case. %>
<% if !next_ann.nil? && parent_id == next_ann.id %>
  <div class="history-straight-arrow">â†‘</div>
<% end %>